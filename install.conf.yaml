- defaults:
    link:
      relink: true
      create: true

# ğŸ§¹ Remove broken symlinks inside $HOME that Dotbot manages
- clean: ['~']

- link:
    # ğŸ” SSH config
    ~/.ssh/config: config/ssh/config

    # ğŸ“ Git configs
    ~/.gitconfig: config/git/gitconfig
    ~/.config/git/ignore:
      path: config/git/gitignore_global-macos

- create:
    # ğŸ“‚ Ensure Work directory exists
    - ~/Work

- shell:
    # ğŸ§± Step 1: Install Homebrew and core tools (git, mas, displayplacer, browsers, 1Password, etc.)
    - command: ./scripts/setup_homebrew.zsh
      stdout: true
      stderr: true

    # ğŸ” Step 2: SSH setup (1Password agent if available, else macOS key)
    - command: ./scripts/setup_ssh.zsh
      stdout: true
      stderr: true

    # ğŸ“ Step 3: Git Validation
    - command: ./scripts/setup_git.zsh
      stdout: true
      stderr: true

    # ğŸŒ Step 4: Set up browsers + 1Password extension (Safari/Chrome/Firefox)
    - command: ./scripts/setup_browsers.zsh
      stdout: true
      stderr: true

    # âš™ï¸ Step 5: Configure macOS preferences (trackpad, Dock, Dark Mode, power, etc.)
    - command: ./scripts/setup_macos.zsh
      stdout: true
      stderr: true

    # ğŸ–¥ï¸ Step 6: Prompt for display ID and apply resolution using displayplacer
    - command: ./scripts/setup_display.zsh
      stdout: true
      stderr: true