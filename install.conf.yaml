- defaults:
    link:
      relink: true

# ğŸ“‚ Create necessary SSH directory
- create:
    - ~/.ssh

# ğŸ”— Link SSH config from dotfiles to ~/.ssh/config
- link:
    ~/.ssh/config:
      path: config/ssh/config
      create: true

- shell:
    # ğŸ§± Step 1: Install Homebrew and core tools (git, mas, displayplacer, etc.)
    - command: ./scripts/setup_homebrew.zsh
      stdout: true
      stderr: true

    # ğŸ” Step 2: SSH setup (1Password agent if available, else macOS key)
    #    â€¢ If prompted, enable 1Password â†’ Settings â†’ Developer â†’ â€œUse 1Password as SSH Agentâ€
    #    â€¢ Otherwise, the script can generate a local SSH key and add it to your keychain
    - command: ./scripts/setup_ssh.zsh
      stdout: true
      stderr: true

    # ğŸ”§ Step 3: Configure global Git settings and aliases
    - command: ./scripts/setup_git.zsh
      stdout: true
      stderr: true

    # âš™ï¸ Step 4: Set macOS preferences: trackpad gestures, Dark Mode, etc.
    - command: ./scripts/setup_macos.zsh
      stdout: true
      stderr: true

    # ğŸ–¥ï¸ Step 5: Prompt for display ID and apply resolution using displayplacer
    - command: ./scripts/setup_display.zsh
      stdout: true
      stderr: true